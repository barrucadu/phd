\begin{titlepage}
  \begin{center}
    \makeatletter

    {\fontsize{28pt}{30pt}\selectfont \@title \par}

    \vspace{1.3cm}

    \Large

    \@author

    \vfill

    Submitted for the degree of\\
    Doctor of Philosophy

    \vspace{1cm}

    University of York\\
    Computer Science

    \vspace{1cm}

    \@date
    \makeatother
  \end{center}
\end{titlepage}

\chapter*{Abstract}
\addcontentsline{toc}{chapter}{Abstract}

We aim to make it easier for programmers to write correct concurrent
programs.  In pursuit of this goal, we develop three lines of work:

\paragraph{Testing concurrent Haskell}
We develop a library for testing concurrent Haskell programs using a
typeclass abstraction of concurrency.  Our tool implements
\emph{systematic concurrency testing}, a family of techniques for
deterministically testing concurrent programs.  We not only obtain a
useful tool for Haskell programs, but we also demonstrate that these
techniques work well in languages with rich concurrency abstractions.

\paragraph{Randomised concurrency testing}
We propose a new algorithm for \emph{randomly} testing concurrent
programs.  This approach is fundamentally incomplete, but is suitable
for large programs, or programs with nondeterminism beyond scheduler
nondeterminism, whereas systematic concurrency testing is not.  We
show that our algorithm performs as well as a pre-existing popular
algorithm for a standard set of benchmarks, while not requiring the
use of program-specific parameters.  We argue that this makes use and
implementation of our algorithm simpler, yet gives results which are
just as good.

\paragraph{Finding properties of programs}
We develop a tool for finding properties of sets of concurrency
functions operating on some shared state, such as the API for a
concurrent data type.  Our tool enumerates Haskell expressions and
discovers properties by comparing execution results for a variety of
inputs.  Unlike other property discovery tools, we support side
effects.  We do so by building on our tool for testing concurrent
Haskell programs.  We also generate lambda-terms, in a restricted
setting, whereas other property discovery tools typically do not.  We
argue that this approach can lead to greater understanding of
concurrency functions.

% octavo disables the "ugly" table-of-contents dots, but I find they
% improve readability.  The default dot separation is 4.5, but I like
% 7:
\makeatletter\renewcommand\@dotsep{7}\makeatother
\tableofcontents
\listoffigures
\listoftables
\listoflistings

\chapter*{Acknowledgements}
\addcontentsline{toc}{chapter}{Acknowledgements}

About a year and a half into my Ph.D, I decided that I had had enough
and wanted to quit.  I was feeling burned out over what felt like
doing the same thing over and over again, and over a conflict of
motivation I had come to recognise between myself and academia.  I am
motivated by making and maintaining tools which people use, whereas
academia is motivated by finding novel results, and the two do not
align perfectly.  Fortunately, with the encouragement of Colin, my
supervisor, I decided to give it until after the summer to set any
wheels in motion.  That break was what I needed, and I came back able
to stick it through to the end.

I did not receive any funding to do my Ph.D.  Due to the generous
support of my family, and the six months I took off for internships, I
was able to work on my Ph.D full time despite the financial handicap.
Having to self-fund a degree is a bit of a shock which forces you to
become good with money.  Even though it was hard at times---because it
was hard at times---I think this is one of the more directly valuable
skills I gained during my time.  I only wish I'd learned this as an
undergraduate, when I really didn't need to spend as much as I did.

The PLASMA group has been a constant source of fun and of knowledge,
even though I got into the habit of going into the office at strange
hours, often not overlapping much with anyone else.  Thanks to Jos\'e
for guiding me through the strange ways of being a Ph.D student in my
first year, and to Rudy and Matt for letting me bounce ideas off them.
It's a shame that with a few of us leaving in quick succession, PLASMA
is now so small.

Thanks to my friends both in-person and online, for putting up with my
venting on more than one occasion.  Finally, thanks to those who
remind me that, no matter what is going on at the moment, one should
always strive to take it easy.

\chapter*{Declaration}
\addcontentsline{toc}{chapter}{Declaration}

This work has not previously been presented for an award at this, or
any other, university.  All sources are cited in the main text and
listed in the bibliography.  Earlier versions of parts of this thesis
were published in the following papers:

\begin{enumerate}
\item Michael Walker and Colin Runciman.  \dejafu{}: A Concurrency
  Testing Library for Haskell.  In \emph{Proceedings of the 8th ACM
    SIGPLAN Symposium on Haskell}, Haskell 2015, pages 141--152.  ACM,
  2015.\nocite{walker2015}
\item Michael Walker and Colin Runciman.  Cheap Remarks about
  Concurrent Programs.  Presented at: \emph{Trends in Functional
    Programming}.  2017.\nocite{tfp-coco}
\item Michael Walker and Colin Runciman.  Cheap Remarks about
  Concurrent Programs.  Accepted for publication in: \emph{Functional
    and Logic Programming Symposium}, FLOPS 2018.  ACM,
  2018.\nocite{flops-coco}
\end{enumerate}

These papers were conceived, implemented, and written by myself with
significant input from Prof.~Runciman.  The first paper contributes to
\Cref{chp:dejafu}, the second and third to \Cref{chp:coco}.  An
updated version of the \dejafu{} paper was published as a departmental
technical report:

\begin{enumerate}
\setcounter{enumi}{3}
\item Michael Walker. \dejafu{}: A Concurrency Testing Library for
  Haskell.  Technical report, University of York, Department of
  Computer Science, 2016.\nocite{YCS-2016-503}
\end{enumerate}

The inspiration for the investigation in \Cref{chp:algorithms} arose
from discussions with Dr.~Alistair Donaldson and the now-Dr.~Paul
Thomson\footnote{Both at Imperial College London}.
