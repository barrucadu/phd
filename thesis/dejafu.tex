\chapstart Tools are necessary to test concurrency, the standard approach does
not suffice.  In this chapter we present and evaluate \dejafu{}, our library for
testing concurrency in Haskell.  We discuss the scope of the
tool~\sref{dejafu-scope} and present our abstraction over the GHC Haskell
concurrency functionality~\sref{dejafu-monadconc}.  We explain how programs
using our abstraction are executed~\sref{dejafu-execution} and
tested~\sref{dejafu-testing}, and argue the correctness of the testing
approach~\sref{dejafu-correctness}.  We present three case
studies~\sref{dejafu-casestudies}, evaluate the usefulness of \dejafu{} for
testing pre-existing code~\sref{dejafu-evaluation}, and finally draw conclusions
and present further work~\sref{dejafu-conclusions}.

This chapter is derived from our previous work \cite{walker2015} and
\cite{YCS-2016-503}.

\section{What We Cannot Test}
\label{sec:dejafu-scope}

\blindtext

\section{Abstracting over I/O}
\label{sec:dejafu-monadconc}

\blindtext

\section{Executing Concurrent Programs}
\label{sec:dejafu-execution}

\blindtext

\section{Testing Concurrent Programs}
\label{sec:dejafu-testing}

\blindtext

\section{Soundness and Completeness}
\label{sec:dejafu-correctness}

\blindtext

\section{Case Studies}
\label{sec:dejafu-casestudies}

\blindtext

\subsection{The auto-update Package}
\subsection{Search Party}
\subsection{The Par Monad}

\section{\dejafu{} in the Wild}
\label{sec:dejafu-evaluation}

\blindtext

\subsection{Richness of the Abstraction}
\subsection{Porting Code}
\subsection{Integration with Existing Tools}

\section{Conclusions and Future Work}
\label{sec:dejafu-conclusions}

\blindtext
